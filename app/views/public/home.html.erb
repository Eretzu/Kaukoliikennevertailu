
<head><script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBMrq2UmpHmSUSndgt-5xNhvdzI5e4wa6g&callback=initialize"
                      type="text/javascript"></script>
</head>
<h1>Public#home</h1>
<p>Find me in app/views/public/home.html.erb</p>
<iframe width="600" height="450" frameborder="0" style="border:0"
src=<%=
if(params.has_key?(:departure) && params.has_key?(:arrive))
"https://www.google.com/maps/embed/v1/directions?origin=#{params[:departure]}&destination=#{params[:arrive]}&key=AIzaSyA4aM_O_PAI4KJi2IqZSuD5RVpthoZevow" 
else
"https://www.google.com/maps/embed/v1/view?zoom=4&center=61.9241,25.7482&key=AIzaSyA4aM_O_PAI4KJi2IqZSuD5RVpthoZevow"
end
%> allowfullscreen></iframe> 
<%= form_tag("/", method: "get") do %>
  <%= collection_select(nil, :departure, @cities, :name, :name, 
    {:selected => params[:departure]}) %>
  <%= collection_select(nil, :arrive,    @cities, :name, :name, 
    {:selected => params[:arrive]}) %>
  <%= submit_tag("Show route") %>  
<% end %>
<input type="text" maxlength="3" name="value" id='value' />
<div id="departure" style="display: none;"> params[:departure] </div>
<div id="arrive" style="display: none;"> params[:arrive]</div>
<div id="map-canvas"></div>
<ol id="panel" style="display: none;" ></ol>
